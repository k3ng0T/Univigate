<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта университетов Казахстана - UniviGate</title>
    <link rel="stylesheet" href="styles/map.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
</head>
<body>
    <!-- Загрузочный экран -->
    <div class="loader-overlay" id="loader">
        <div class="loader-content">
            <div class="loader-spinner"></div>
            <p>Загрузка карты...</p>
        </div>
    </div>

    <!-- Навигация -->
    <div class="top-nav">
        <a href="../index.html" class="nav-back-btn" title="На главную">
            <i class="fas fa-home"></i>
        </a>
        <div class="nav-title">
            <i class="fas fa-map-marked-alt"></i>
            Карта университетов
        </div>
        <button class="nav-help-btn" id="help-btn" title="Помощь">
            <i class="fas fa-question"></i>
        </button>
    </div>

    <!-- Подсказка при первом запуске -->
    <div class="onboarding-tooltip" id="onboarding">
        <div class="tooltip-arrow"></div>
        <div class="tooltip-content">
            <i class="fas fa-lightbulb"></i>
            <p><strong>Подсказка:</strong> Нажмите на круглый маркер с цифрой, чтобы увидеть университеты в этой области</p>
            <button class="tooltip-close" id="close-onboarding">Понятно!</button>
        </div>
    </div>

    <!-- Основной контейнер -->
    <div class="map-wrapper">
        <!-- Карта -->
        <div id="map"></div>

        <!-- Панель информации справа -->
        <div class="info-panel" id="info-panel">
            <!-- Кнопка сворачивания панели (для мобильных) -->
            <button class="panel-toggle" id="panel-toggle">
                <i class="fas fa-chevron-down"></i>
            </button>
            
            <div class="panel-content" id="panel-content">
                <div class="panel-placeholder">
                    <div class="placeholder-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h3>Выберите область</h3>
                    <p>Нажмите на маркер на карте, чтобы увидеть список университетов в выбранной области</p>
                    <div class="placeholder-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="total-regions">0</span>
                            <span class="stat-label">Областей</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="total-unis">0</span>
                            <span class="stat-label">Университетов</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Мини-карта управления -->
    <div class="map-controls">
        <button class="control-btn" id="zoom-in" title="Приблизить">
            <i class="fas fa-plus"></i>
        </button>
        <button class="control-btn" id="zoom-out" title="Отдалить">
            <i class="fas fa-minus"></i>
        </button>
        <button class="control-btn" id="reset-view" title="Сбросить вид">
            <i class="fas fa-expand"></i>
        </button>
    </div>

    <!-- Модальное окно помощи -->
    <div class="help-modal" id="help-modal">
        <div class="help-modal-content">
            <button class="help-close" id="help-close">
                <i class="fas fa-times"></i>
            </button>
            <h2><i class="fas fa-info-circle"></i> Как пользоваться картой</h2>
            <div class="help-steps">
                <div class="help-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Выберите область</h4>
                        <p>Нажмите на круглый маркер с цифрой на карте. Цифра показывает количество университетов в области.</p>
                    </div>
                </div>
                <div class="help-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Просмотрите список</h4>
                        <p>В правой панели появится список всех университетов выбранной области.</p>
                    </div>
                </div>
                <div class="help-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Узнайте подробности</h4>
                        <p>Нажмите на университет в списке или на его маркер на карте, чтобы увидеть подробную информацию.</p>
                    </div>
                </div>
            </div>
            <div class="help-tips">
                <h4><i class="fas fa-lightbulb"></i> Полезные советы</h4>
                <ul>
                    <li>Используйте колёсико мыши для масштабирования</li>
                    <li>Перетаскивайте карту, зажав левую кнопку мыши</li>
                    <li>Нажмите <i class="fas fa-expand"></i> для сброса вида</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <script src="js/map-data.js"></script>
    <script src="js/map.js"></script>
</body>
</html>

